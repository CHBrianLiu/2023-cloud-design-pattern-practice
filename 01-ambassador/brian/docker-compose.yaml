version: "3.8"
services:
  saas1:
    build:
      context: .
      dockerfile: ./Dockerfile
      target: saas
    ports:
      - "80"
  saas2:
    build:
      context: .
      dockerfile: ./Dockerfile
      target: saas
    ports:
      - "80"
  saas3:
    build:
      context: .
      dockerfile: ./Dockerfile
      target: saas
    ports:
      - "80"
  proxy:
    build:
      context: .
      dockerfile: ./Dockerfile
      target: proxy
    ports:
      - "80"
  internal-service:
    build:
      context: .
      dockerfile: ./Dockerfile
      target: internal
    depends_on:
      - saas1
      - saas2
      - saas3
      - proxy
